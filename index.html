<!DOCTYPE html>
<html lang="el">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-el="app-title"></title>
    <!-- Font Awesome via CDNJS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" referrerpolicy="no-referrer" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <style>
         :root {
            --primary: #0066cc;
            --secondary: #4caf50;
            --danger: #e53935;
            --bg-gradient: linear-gradient(135deg, #e0f7fa 0%, #80deea 100%);
            --font: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font);
            background: var(--bg-gradient);
            color: #333;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 1rem;
        }
        
        .container {
            background: #fff;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            width: 100%;
            position: relative;
            margin-bottom: 2rem;
            animation: fadeIn 0.8s ease-in-out;
        }
        
        .app-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        .app-logo {
            height: 96px;
            width: auto;
        }
        
        .app-title {
            font-size: 2rem;
            color: var(--primary);
            margin: 0;
        }
        
        h2 {
            text-align: center;
            margin-bottom: 1rem;
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        label {
            display: block;
            margin-top: 1rem;
            font-weight: 500;
        }
        
        input,
        select {
            width: 100%;
            padding: 0.8rem;
            margin-top: 0.3rem;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-sizing: border-box;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        input:focus,
        select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 102, 204, 0.2);
        }
        
        button {
            margin-top: 1.5rem;
            width: 100%;
            padding: 0.8rem;
            background: var(--primary);
            color: #fff;
            font-size: 1rem;
            font-weight: 500;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, background 0.3s;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        }
        
        button:hover {
            background: #004a99;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .result,
        .share-section {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: #e6f2ff;
            border-radius: 8px;
            line-height: 1.4;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .share-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .share-button {
            flex: 1 1 calc(25% - 0.5rem);
            text-align: center;
            padding: 0.75rem 0;
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, background 0.3s;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }
        
        .share-button i {
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .share-button:hover {
            background: #f0f0f0;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .footer {
            text-align: center;
            font-size: 0.9rem;
            color: #666;
            border-top: 1px solid #eee;
            padding-top: 1rem;
            width: 100%;
            max-width: 500px;
        }
        
        .footer a {
            color: var(--primary);
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer a:hover {
            color: #004a99;
            text-decoration: underline;
        }
        
        .result-box {
            background: #fff;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .result-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
            margin: 0;
        }
        
        .result-label {
            color: #666;
            margin: 0.5rem 0 0 0;
            font-size: 0.9rem;
        }
        
        .result-diff {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary);
            margin: 0;
        }
        
        .result-diff-label {
            color: #666;
            margin: 0.5rem 0 0 0;
            font-size: 0.9rem;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        /* Modal styles */
        
        .info-button {
            position: absolute;
            top: 0;
            right: 0;
            background: none;
            border: none;
            color: #0066cc;
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0.25rem;
            transition: color 0.3s;
            z-index: 10;
            line-height: 1;
        }
        
        .info-button:hover {
            color: #004a99;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            color: var(--primary);
            cursor: pointer;
            transition: color 0.3s, transform 0.2s;
            padding: 0.5rem;
            z-index: 10;
        }
        
        .modal-close:hover {
            color: #004a99;
            transform: scale(1.1);
        }
        
        .modal-logo {
            display: block;
            margin: 0 auto 1.5rem;
            height: 120px;
            width: auto;
        }
        
        .modal-section {
            margin-bottom: 1.5rem;
        }
        
        .modal-section h3 {
            color: #0066cc;
            margin-bottom: 0.5rem;
        }
        
        .modal-section p {
            margin: 0.5rem 0;
            line-height: 1.5;
        }
        
        .info-icon {
            position: absolute;
            top: 0;
            right: 0;
            font-size: 1.5rem;
            color: #0066cc;
            cursor: pointer;
        }
        
        .lang-toggle {
            position: absolute;
            top: 0;
            left: 0;
            font-size: 1rem;
            color: #0066cc;
            cursor: pointer;
            padding: 0.5rem;
            background: none;
            border: 1px solid #0066cc;
            border-radius: 0.5rem;
            transition: all 0.3s;
        }
        
        .lang-toggle:hover {
            background: #0066cc;
            color: white;
        }
        /* Notice Modal Styles */
        
        .notice-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .notice-modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            width: 90%;
            position: relative;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        .notice-modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            color: #666;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .notice-modal-close:hover {
            color: var(--danger);
        }
        
        .notice-modal-message {
            margin: 1rem 0;
            text-align: center;
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .notice-modal-button {
            display: block;
            width: 100%;
            padding: 0.75rem;
            margin-top: 1rem;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .notice-modal-button:hover {
            background-color: #0052a3;
        }
        
        .privacy-notice {
            text-align: center;
            font-size: 0.9rem;
            color: #666;
            margin-top: 1rem;
            font-style: italic;
            line-height: 1.4;
        }
        
        .modal-logos {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            margin-bottom: 1.5rem;
            padding-top: 1rem;
        }
        
        .modal-logo {
            height: 60px;
            width: auto;
            object-fit: contain;
        }
        
        .email-link {
            color: var(--primary);
            text-decoration: none;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .email-link:hover {
            color: #004a99;
            text-decoration: underline;
        }
        
        .privacy-link {
            color: var(--primary);
            text-decoration: none;
            transition: color 0.3s;
            font-size: 0.9rem;
        }
        
        .privacy-link:hover {
            color: #004a99;
            text-decoration: underline;
        }
        
        .about-link {
            color: var(--primary);
            text-decoration: none;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .about-link:hover {
            color: #004a99;
            text-decoration: underline;
        }
        
        .example-link {
            color: var(--primary);
            text-decoration: none;
            cursor: pointer;
            font-size: 0.9rem;
            margin-left: 0.3rem;
            transition: color 0.3s;
            display: inline-block;
        }
        
        .example-link:hover {
            color: #004a99;
            text-decoration: underline;
        }
        
        .example-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .example-modal-content {
            background: white;
            padding: 1rem;
            border-radius: 12px;
            max-width: 90%;
            max-height: 90vh;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .example-image {
            max-width: 100%;
            max-height: calc(90vh - 2rem);
            object-fit: contain;
        }
        
        .example-modal-close {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            font-size: 1.5rem;
            color: var(--primary);
            cursor: pointer;
            transition: color 0.3s, transform 0.2s;
            padding: 0.5rem;
            z-index: 10;
        }
        
        .example-modal-close:hover {
            color: #004a99;
            transform: scale(1.1);
        }
        
        label[for="total"] {
            display: inline-block;
            margin-right: 0.2rem;
        }
        
        .gauge-track {
            width: 100%;
            height: 14px;
            background: #eee;
            border-radius: 7px;
            margin-bottom: .4rem
        }
        
        .gauge-fill {
            height: 100%;
            background: #4caf50;
            border-radius: 7px;
            transition: width .6s ease, background .6s ease
        }
        
        .subtitle {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--primary);
            font-size: 1rem;
            font-weight: 500;
        }
        
        .scarcity-banner {
            background: #ffefc5;
            border-left: 6px solid #ff9800;
            padding: .75rem 1rem;
            border-radius: 8px;
            font-size: .95rem;
            margin-bottom: 1.25rem;
            position: relative;
        }
        
        .action-banner {
            background: #e8f5e8;
            border-left: 6px solid #4caf50;
            padding: .75rem 1rem;
            border-radius: 8px;
            font-size: .95rem;
            margin-bottom: 1.25rem;
            position: relative;
        }
        
        .info-icon {
            cursor: pointer;
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
        }
        
        .info-icon-orange {
            color: #ff9800;
        }
        
        .info-icon-green {
            color: #4caf50;
        }
        
        .instructions-text {
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
            text-align: left;
            line-height: 1.5;
        }
        
        .how-it-works-image {
            text-align: center;
        }
        
        .how-it-works-image img {
            max-width: 60%;
            height: auto;
        }
        
        .tips-button {
            margin: 1.5rem 0 0.5rem 0;
            background: var(--secondary);
            color: #fff;
            font-weight: bold;
            width: 100%;
        }
        
        .reminder-button {
            margin: 0.5rem 0 1.5rem 0;
            background: #ff9800;
            color: #fff;
            font-weight: bold;
            width: 100%;
        }
        
        .progress-reminder {
            background: #e3f2fd;
            border-left: 6px solid #2196f3;
            padding: .75rem 1rem;
            border-radius: 8px;
            font-size: .9rem;
            margin-top: 1.25rem;
            text-align: left;
            color: #1976d2;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="app-header">
            <i class="lang-toggle" id="langToggle" title="English"></i>
            <img src="logo.png" alt="Stagona Water Consumption Calculator Logo" class="app-logo" />
            <i class="fas fa-info-circle info-icon" id="infoButton" title="About"></i>
        </div>
        <h2 data-el="title"></h2>
        <h3 class="subtitle">
            <span data-el="intro-question"></span>
        </h3>

        <div id="scarcityBanner" class="scarcity-banner">
            <span data-el="scarcity-msg"></span>
            <i class="fas fa-info-circle info-icon info-icon-orange" id="stressInfo"></i>
        </div>

        <div id="actionBanner" class="action-banner">
            <span data-el="action-msg"></span>
            <i class="fas fa-info-circle info-icon info-icon-green" id="actionInfo"></i>
        </div>



        <div class="instructions-text">
            <span data-el="intro-instructions"></span>
        </div>
        <div class="how-it-works-image">
            <img src="howitworks.png" alt="How the Stagona water consumption calculator works">
        </div>
        <div>
            <label for="total"><span data-el="total-label"></span><a href="#" class="example-link" data-el="example-link"></a></label>
        </div>
        <input type="number" id="total" data-el="total-placeholder" min="0" step="0.1" />

        <label for="period" data-el="period-label"></label>
        <select id="period" required>
            <option value="" disabled selected data-el="period-select"></option>
            <option value="1" data-el="period-1"></option>
            <option value="2" data-el="period-2"></option>
            <option value="3" data-el="period-3"></option>
            <option value="4" data-el="period-4"></option>
        </select>

        <label for="people" data-el="people-label"></label>
        <input type="number" id="people" data-el="people-placeholder" min="1" step="1" />

        <button id="calc" data-el="calc-button"></button>


        <div class="result" id="result" style="display: none"></div>
        <button id="tipsButton" type="button" class="tips-button">💡 <span data-el="tips-title"></span></button>

        <div class="progress-reminder">
            <span data-el="progress-reminder-msg"></span>
        </div>
        <button id="reminderButton" type="button" class="reminder-button">📅 <span data-el="reminder-title"></span></button>

        <div class="share-section" id="shareSection" style="display: none">
            <strong data-el="share-title"></strong>
            <div class="share-buttons">
                <div class="share-button" id="shareTwitter" title="Twitter">
                    <i class="fab fa-twitter"></i>
                </div>
                <div class="share-button" id="shareFacebook" title="Facebook">
                    <i class="fab fa-facebook"></i>
                </div>
                <div class="share-button" id="shareWhatsApp" title="WhatsApp">
                    <i class="fab fa-whatsapp"></i>
                </div>
                <div class="share-button" id="shareViber" title="Viber">
                    <i class="fab fa-viber"></i>
                </div>
                <div class="share-button" id="shareEmail" title="Email">
                    <i class="fas fa-envelope"></i>
                </div>
                <div class="share-button" id="copySummary" title=" Copy message">
                    <i class="fas fa-clipboard"></i>
                </div>
            </div>
        </div>
        <p class="privacy-notice">
            <span data-el="contact-info-prefix"></span>
            <a href="#" id="contactEmail" class="email-link">kios-dwic@ucy.onmicrosoft.com</a>
        </p>
        <p class="privacy-notice">
            <a href="https://github.com/KIOS-Research/stagona_app/blob/main/privacy_policy.md" target="_blank" class="privacy-link">Privacy Policy:</a> <span data-el="privacy-notice"></span>
        </p>


    </div>

    <!-- Example Modal -->
    <div class="example-modal" id="exampleModal">
        <div class="example-modal-content">
            <i class="fas fa-times example-modal-close" id="exampleModalClose"></i>
            <img src="eoanicosia.png" alt="Example water bill from EOA Nicosia showing consumption data" class="example-image">
        </div>
    </div>

    <!-- Notice Modal -->
    <div class="notice-modal" id="noticeModal">
        <div class="notice-modal-content">
            <i class="fas fa-times notice-modal-close" id="noticeModalClose"></i>
            <div class="notice-modal-message" id="noticeModalMessage"></div>
            <button class="notice-modal-button" id="noticeModalButton">OK</button>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <a href="https://www.kios.ucy.ac.cy/eliades" target="_blank">Digital Water Innovations Cluster</a
        >, <a href="https://www.kios.ucy.ac.cy" target="_blank"
          >KIOS Research and Innovation Center of Excellence</a
        >, <a href="https://www.ucy.ac.cy" target="_blank">University of Cyprus. </a> <br>Copyright © 2025 KIOS CoE, UCY. All rights reserved.<br>

    </div>

    <!-- Modal -->
    <div class="modal" id="aboutModal">
        <div class="modal-content">
            <i class="fas fa-times modal-close" id="modalClose"></i>

            <div class="modal-logos">
                <img src="ucy_logo.png" alt="University of Cyprus Logo" class="modal-logo" />
                <img src="kios_logo.png" alt="KIOS Research and Innovation Center of Excellence Logo" class="modal-logo" />
            </div>

            <div class="modal-section">
                <h3 data-el="about-title"></h3>
                <p data-el="about-desc"></p>
            </div>

            <div class="modal-section">
                <h3 data-el="how-to-title"></h3>
                <p data-el="how-to-1"></p>
                <p data-el="how-to-2"></p>
                <p data-el="how-to-3"></p>
                <p data-el="how-to-4"></p>
                <p data-el="how-to-5"></p>
            </div>

            <div class="modal-section">
                <h3 data-el="privacy-title"></h3>
                <span data-el="privacy-desc"></span> (<a href="https://github.com/KIOS-Research/stagona_app/blob/main/privacy_policy.md" target="_blank" class="privacy-link">Privacy Policy</a>)
            </div>

            <div class="modal-section">
                <h3 data-el="version-title"></h3>
                <p data-el="version-number"></p>
            </div>
        </div>
    </div>

    <!-- Tips Modal -->
    <div class="modal" id="tipsModal">
        <div class="modal-content">
            <i class="fas fa-times modal-close" id="tipsModalClose"></i>
            <div class="modal-section">
                <h3 data-el="tips-title"></h3>
                <p data-el="tip-1"></p>
                <p data-el="tip-2"></p>
                <p data-el="tip-3"></p>
                <p data-el="tip-4"></p>
                <p data-el="tip-5"></p>
                <p data-el="tip-6"></p>
                <p data-el="tip-7"></p>
            </div>
        </div>
    </div>

    <!-- Water Stress Info Modal -->
    <div class="modal" id="stressInfoModal">
        <div class="modal-content">
            <i class="fas fa-times modal-close" id="stressInfoModalClose"></i>
            <div class="modal-section">
                <h3 data-el="stress-info-title"></h3>
                <p data-el="stress-info-1"></p>
                <p data-el="stress-info-2"></p>
                <p data-el="stress-info-3"></p>
                <p data-el="stress-info-4"></p>
                <p data-el="stress-info-5"></p>
            </div>
        </div>
    </div>

    <!-- Action Info Modal -->
    <div class="modal" id="actionInfoModal">
        <div class="modal-content">
            <i class="fas fa-times modal-close" id="actionInfoModalClose"></i>
            <div class="modal-section">
                <h3 data-el="action-info-title"></h3>
                <p data-el="action-info-1"></p>
                <p data-el="action-info-2"></p>
                <p data-el="action-info-3"></p>
                <p data-el="action-info-4"></p>
                <p data-el="action-info-5"></p>
            </div>
        </div>
    </div>

    <script>
        // Translations object
        const translations = {
            el: {
                "app-title": "Stagona - Υπολογιστής Κατανάλωσης Νερού",
                "info-title": "Πληροφορίες",
                "title": "Σταγονο-μετρώ!",
                "intro-question": "Γνωρίζεις πόσα λίτρα νερό χρησιμοποιείς κάθε μέρα;<br>Πώς συγκρίνεσαι με το μέσο Κύπριο;<br>Υπολόγισέ το σε 1 λεπτό!",
                "intro-instructions": "Βρες ένα πρόσφατο τιμολόγιο από τον οργανισμό υδροδότησής σου, και συμπλήρωσε τα πιο κάτω στοιχεία, για να υπολογίσεις πόσα λίτρα νερό χρησιμοποιείς κάθε ημέρα.",
                "total-label": "Συνολική κατανάλωση περιόδου (σε m³):",
                "period-label": "Περίοδος κατανάλωσης (σε μήνες):",
                "period-select": "Επιλέξτε περίοδο ή ΕΟΑ",
                "period-1": "1 μήνας",
                "period-2": "2 μήνες (ΕΟΑ Λευκωσίας)",
                "period-3": "3 μήνες (ΕΟΑ Λάρνακας, Πάφου, Αμμοχώστου)",
                "period-4": "4 μήνες (ΕΟΑ Λεμεσού)",
                "people-label": "Αριθμός ατόμων που κατοικούν στο σπίτι:",
                "calc-button": "Υπολόγισε",
                "privacy-notice": "Δεν συλλέγουμε προσωπικά δεδομένα μέσω της εφαρμογής, μόνο ανώνυμες στατιστικές του ιστοτόπου.",
                "privacy-title": "Απόρρητο",
                "privacy-desc": "Δεν συλλέγουμε προσωπικά δεδομένα μέσω της εφαρμογής, μόνο ανώνυμες στατιστικές του ιστοτόπου.",
                "liters": "λίτρα",
                "about-title": "Σχετικά με το Stagona App",
                "about-desc": "Υπολογιστική σχεδιασμένη για να βοηθά τα νοικοκυριά στην Κύπρο να κατανοήσουν και να βελτιστοποιήσουν την κατανάλωση νερού τους. Η εφαρμογή συγκρίνει την κατανάλωση νερού σας με τον μέσο όρο και παρέχει συστάσεις για την εξοικονόμηση νερού.",
                "how-to-title": "Πώς να το χρησιμοποιήσετε",
                "how-to-1": "1. Βρείτε τον λογαριασμό κατανάλωσης νερού σας",
                "how-to-2": "2. Εισάγετε τη συνολική κατανάλωση νερού σας σε κυβικά μέτρα (m³) όπως αναγράφεται στον λογαριασμό",
                "how-to-3": "3. Επιλέγετε την ορθή περίοδο χρέωσης",
                "how-to-4": "4. Εισάγετε τον αριθμό των ατόμων που έχουν ως συνήθη κατοικία τους το νοικοκυριό",
                "how-to-5": '5. Κάντε κλικ στο "Υπολόγισε" για να δείτε τα αποτελέσματα',
                "tips-title": "Συμβουλές εξοικονόμησης νερού",
                "tip-1": "• Κάντε πιο σύντομα ντους με χαμηλότερη πίεση. Στοχεύστε στα 5 λεπτά συνεχούς ροής, που αντιστοιχεί σε 45 λίτρα νερού. Κάθε λεπτό στο ντους απαιτεί περίπου 9 λίτρα νερού, και κατά μέσο όρο ένα ντους διαρκεί 10 λεπτά, που αντιστοιχεί στο 60% της συνολικής κατανάλωσης νερού. Συλλέξτε τυχόν κρύο νερό μέχρι να έρθει το ζεστό, σε κουβά.",
                "tip-2": "• Εντοπίστε και επισκευάστε τυχόν διαρροές. Ελέγξτε την κατανάλωση στον μετρητή σας τις ώρες που απουσιάζετε από το σπίτι. Ελέγχετε τακτικά τους ηλιακούς θερμοσίφωνες και τις δεξαμενές για διαρροές",
                "tip-3": "• Χρησιμοποιήστε πλήρη φορτίο στα πλυντήρια και στα πλυντήρια πιάτων",
                "tip-4": "• Επιλέξτε φυτά που αντέχουν στην ξηρασία για τον κήπο (ξηρανθεκτικά είδη) και περιορίστε τις επιφάνειες γρασιδιών",
                "tip-5": "• Κλείστε τη βρύση όταν βουρτσίζετε τα δόντια ή ξυρίζεστε. Να θυμάστε ότι κάθε λεπτό η ποσότητα νερού που φεύγει από μια βρύση αντιστοιχεί σε 15 λίτρα, ή το 10% της ημερήσιας κατανάλωσης για ένα άτομο",
                "tip-6": "• Ποτίστε νωρίς το πρωί ή αργά το απόγευμα για να περιορίσετε την εξάτμιση. Αποφύγετε τη χρήση λαστίχου, καθώς αντιστοιχεί σε 15 λίτρα το λεπτό (το 10% της ημερήσιας κατανάλωσης νερού ανά άτομο στην Κύπρου)",
                "tip-7": "• Χρησιμοποιήστε κουβά και σφουγγάρι αντί για λάστιχο όταν πλένετε το αυτοκίνητο",
                "result-title": "Μέση κατανάλωση ανά άτομο/ημέρα",
                "result-diff": "Διαφορά από το μέσο όρο (140 λίτρα)",
                "result-below": "κάτω από μέσο όρο",
                "result-above": "πάνω από μέσο όρο",
                "result-excellent": "Εξαιρετικά! Καταναλώνετε λιγότερο από το 20% της μέσης κατανάλωσης.",
                "result-excellent-desc": "Αν όλοι οι πολίτες είχαν αυτή την κατανάλωση, θα εξοικονομούσαμε περίπου 10 εκατ. m³ νερού ετησίως, που θα αρκούσε για να υδροδοτηθούν 200,000 άτομα για ένα χρόνο (που αντιστοιχεί στο πληθυσμό της Επαρχίας Λάρνακας και Αμμοχώστου)! <br><br> Συνεχίστε έτσι και βοηθήστε να εδραιωθεί η υδατική συνείδηση στην Κύπρο!",
                "result-good": "Πολύ καλά! Καταναλώνετε 10% λιγότερο νερό από τον μέσο όρο.",
                "result-good-desc": "Εάν όλοι οι πολίτες είχαν αυτή την κατανάλωση, θα εξοικονομούσαμε περίπου 5 εκατ. m³ νερού ετησίως, που θα αρκούσε για να υδροδοτηθούν 100,000 άτομα για ένα χρόνο (που αντιστοιχεί στο πληθυσμό της Επαρχίας Πάφου)! <br><br> Συνεχίστε έτσι, και με κάποιες μικρές αλλαγές, όπως πιο σύντομα ντους κατά 1-2 λεπτά, αποφυγή χρήσης λαστίχου για πότισμα, και χρήση πλυντηρίου με πλήρες γέμισμα, θα σας φέρουν ακόμη πιο κοντά στους κορυφαίους καταναλωτές!",
                "result-average": "Μπράβο! είστε ελαφρώς κάτω από τον μέσο όρο.",
                "result-average-desc": "Αν όλοι είχαμε αυτή την κατανάλωση, θα εξοικονομούσαμε σχεδόν 2.5 εκατ. m³ ετησίως, που θα αρκούσε για να υδροδοτηθούν 50,000 άτομα για ένα χρόνο (που αντιστοιχεί στο πληθυσμό της Επαρχίας Αμμοχώστου)! <br><br> Συνεχίστε έτσι, και με κάποιες στοχευμένες αλλαγές, όπως πιο σύντομα ντους κατά 2-3 λεπτά, αποφυγή χρήσης λαστίχου για πότισμα και χρήση πλυντηρίου με πλήρες γέμισμα, θα σας φέρουν ακόμη πιο κοντά στο στόχο της μείωσης κατά 10% της συνολικής κατανάλωσης (125 λίτρα/άτομο)!",
                "result-slightly-high": "Προσέξτε! Είστε λίγο πάνω από το μέσο όρο.",
                "result-slightly-high-desc": "Ξεπερνάτε τον μέσο όρο κατανάλωσης νερού στην Κύπρο, που αντιστοιχεί σε 140 λίτρα ανά άτομο ανά ημερα. Μειώνοντας το ντους μόλις κατά 2 λεπτά (20 λίτρα), μπορείτε να φτάσετε εύκολα τον μέσο όρο!  <br><br> Με κάποιες στοχευμένες αλλαγές, όπως αποφυγή χρήσης λαστίχου για πότισμα, και χρήση πλυντηρίου με πλήρες γέμισμα, θα σας φέρουν ακόμη πιο κοντά στο στόχο της μείωσης κατά 10% της συνολικής κατανάλωσης (125 λίτρα/άτομο)!",
                "result-high": "Προσοχή! Καταναλώνετε περισσότερο από το 10% της μέσης κατανάλωσης.",
                "result-high-desc": "Ξεπερνάτε τον μέσο όρο κατανάλωσης νερού στην Κύπρο, που αντιστοιχεί σε 140 λίτρα ανά άτομο ανά ημερα. Μειώνοντας το ντους μόλις κατά 2-3 λεπτά (20-30 λίτρα), μπορείτε να φτάσετε εύκολα τον μέσο όρο!  <br><br> Με κάποιες στοχευμένες αλλαγές, όπως αποφυγή χρήσης λαστίχου για πότισμα, και χρήση πλυντηρίου με πλήρες γέμισμα, θα σας φέρουν ακόμη πιο κοντά στο στόχο της μείωσης κατά 10% της συνολικής κατανάλωσης (125 λίτρα/άτομο)!",
                "result-very-high": "Προσοχή! Καταναλώνετε περισσότερο από το 20% της μέσης κατανάλωσης.",
                "result-very-high-desc": "Ο μέσος καταναλωτής στην Κύπρο καταναλώνει 140 λίτρα/ημέρα. Ξεκινήστε άμεσα με μικρές αλλαγές για να φτάσετε τον μέσο όρο. Μειώσετε κατά 2-3 λεπτά το καθημερινό ντους (20-30 λίτρα).  <br><br> Με κάποιες στοχευμένες αλλαγές, όπως αποφυγή χρήσης λαστίχου για πότισμα, έλεγχος για τυχόν διαρροές (παρακολουθώντας την κατανάλωση στον μετρητή σας τις ώρες που απουσιάζετε από το σπίτι), και χρήση πλυντηρίου με πλήρες γέμισμα, θα σας φέρουν ακόμη πιο κοντά στο στόχο της μείωσης κατά 10% της συνολικής κατανάλωσης (125 λίτρα/άτομο)!",
                "share-title": "Μοιραστείτε το αποτέλεσμα:",
                "copy-success": "Αντιγράφηκε!",
                "email-subject": "Κατανάλωση νερού",
                "fill-fields": "Παρακαλώ συμπληρώστε σωστά όλα τα πεδία.",
                "negative-consumption": "Η κατανάλωση νερού δεν μπορεί να είναι μηδέν ή αρνητική.",
                "negative-people": "Ο αριθμός των ατόμων δεν μπορεί να είναι μηδέν ή αρνητικός.",
                "total-placeholder": "π.χ., 30",
                "people-placeholder": "π.χ., 4",
                "copy-summary": "Αντέγραψε περίληψη",
                "version-title": "Έκδοση",
                "version-number": "0.99",
                "contact-info": "Για βελτιώσεις και προτάσεις, παρακαλούμε επικοινωνήστε μαζί μας στο kios-dwic@ucy.onmicrosoft.com",
                "contact-info-prefix": "Για βελτιώσεις και προτάσεις, παρακαλούμε επικοινωνήστε μαζί μας στο ",
                "example-link": "[παράδειγμα]",
                "email-copied": "Το email αντιγράφηκε!",
                "scarcity-msg": "Η Κύπρος αντιμετωπίζει χρόνιο υδατικό στρες, το χειρότερο στην Ευρώπη. Την ίδια στιγμή, το 30% των Ευρωπαίων αντιμετωπίζουν παρόμοιες ελλείψεις.",
                "action-msg": "Επιπρόσθετα των αφαλατώσεων και μείωσης των απωλειών, μπορούμε και εμείς ως πολίτες να μειώσουμε το ρίσκο περικοπών νερού, με μικρές αλλαγές στις συνήθειές μας:  με κάθε 1 λεπτό λιγότερη χρήση νερού (1 λεπτό ≈ 10L), εξασφαλίζουμε νερό για ακόμη 70,000 άτομα!",
                "reminder-title": "Υπενθύμιση σε 1 μήνα",
                "progress-reminder-msg": "Βάλτε υπενθύμιση για να επαναλάβετε τον υπολογισμό σε 30 ημέρες και να μετρήσετε την πρόοδό σας! Θα χρειαστεί να καταγράψετε τη μέτρηση στο υδρόμετρό σας (π.χ. βγάζοντας το φωτογραφία), για να υπολογίσετε τη διαφορά.",
                "stress-info-title": "Τι είναι το χρόνιο υδατικό στρές;",
                "stress-info-1": "Το χρόνιο υδατικό στρές είναι μια κατάσταση όπου η ζήτηση νερού υπερβαίνει τη διαθεσιμότητα για μεγάλο χρονικό διάστημα. Στην Κύπρο, αυτό σημαίνει ότι καταναλώνουμε περισσότερο νερό από αυτό που μπορεί να αναπληρώσει φυσικά η βροχόπτωση.",
                "stress-info-2": "Σύμφωνα με την Ευρωπαϊκή Επιτροπή, η Κύπρος αντιμετωπίζει υψηλό επίπεδο υδατικού στρες (>40%), που την τοποθετεί ανάμεσα στις πιο ευάλωτες χώρες της Ευρώπης.",
                "stress-info-3": "Οι κύριοι παράγοντες που επιβαρύνουν το υδατικό στρες, είναι η αύξηση του πληθυσμού, η τουριστική ανάπτυξη, η αγροτική δραστηριότητα, και η κλιματική αλλαγή που μειώνει τη βροχόπτωση κατά 15-20% τα τελευταία 30 χρόνια. Παράλληλα, η οικιακή κατανάλωση παραμένει στα 140 λίτρα ανά άτομο την ημέρα, ενώ ο μέσος όρος στην ΕΕ είναι 124 λίτρα ανά άτομο.",
                "stress-info-4": "Οι επιπτώσεις του υδατικού στρες περιλαμβάνουν: περικοπές νερού, αύξηση του κόστους, υποβάθμιση της ποιότητας του νερού, και απειλή για τη βιοποικιλότητα..",
                "stress-info-5": "Πέραν από τις νέες τεχνολογίες και αναβάθμιση των δικτύων, χρειάζεται να κάνουμε συντηρητική χρήση νερού. Κάθε λίτρο που εξοικονομούμε βοηθάει να διατηρήσουμε τα υπόγεια νερά και να μειώσουμε την εξάρτηση από την αφαλάτωση, που είναι ενεργειακά ακριβή και περιβαλλοντικά επιβαρυντική, ενώ εξασφαλίζουμε επαρκείς ποσότητες για την γεωργία.",
                "action-info-title": "Πώς μικρές αλλαγές κάνουν μεγάλη διαφορά;",
                "action-info-1": "Η εξοικονόμηση 1 λεπτού νερού ανά άτομο ανά ημέρα μπορεί να φαίνεται μικρή, αλλά πολλαπλασιασμένη με τον πληθυσμό της Κύπρου (~1 εκατομμύριο) δημιουργεί τεράστια επίδραση.",
                "action-info-2": "Υπολογισμός: 1 λεπτό × 10 λίτρα/λεπτό × 1 εκατομμύρια άτομα × 365 ημέρες = 3.65 εκατομμύρια m³ νερού ετησίως.",
                "action-info-3": "Αυτή η ποσότητα νερού μπορεί να υδροδοτήσει 70,000 άτομα για ένα χρόνο, ή να καλύψει σχεδόν τις ανάγκες της Επαρχίας Πάφου.",
                "action-info-4": "Επιπλέον, η εξοικονόμηση νερού δίνει μεγαλύτερη ευελιξία στην αξιοποίηση των ποσοτήτων που παραμένουν στα φράγματα, σε συνδιασμό με την αφαλάτωση, μειώνοντας το κόστος για τον καταναλωτή, καθώς και τις εκπομπές αερίων θερμοκηπίου.",
                "action-info-5": "Μικρές αλλαγές όπως: κλείσιμο της βρύσης κατά το βούρτσισμα δοντιών (~15L), πιο σύντομο ντους (~20L), και αποφυγή χρήσης λαστίχου (~15-30L/λεπτό) μπορούν εύκολα να φέρουν σημαντικές καθημερινές εξοικονομήσεις."
            },
            en: {
                "app-title": "Stagona - Water Consumption Calculator",
                "info-title": "Information",
                "title": "Water Calculator",
                "intro-question": "Do you know how many liters of water you consume daily? Calculate it in 1 minute and see how you compare to the average Cypriot.",
                "intro-instructions": "Find a recent bill from your water utility organization and fill in the details below to calculate it.",
                "total-label": "Total period consumption (in m³):",
                "period-label": "Consumption period (in months):",
                "period-select": "Select period or EOA",
                "period-1": "1 month",
                "period-2": "2 months (EOA Nicosia)",
                "period-3": "3 months (EOA Larnaca, Paphos, Famagusta)",
                "period-4": "4 months (EOA Limassol)",
                "people-label": "Number of people residing in the house:",
                "calc-button": "Calculate",
                "privacy-notice": "We collect no personal data through the app, only anonymous website analytics. ",
                "privacy-title": "Privacy",
                "privacy-desc": "We collect no personal data through the app, only anonymous website analytics.",
                "liters": "liters",
                "about-title": "About Stagona App",
                "about-desc": "A calculator designed to help households in Cyprus understand and optimize their water consumption. The app compares your water consumption with the average and provides recommendations for water savings.",
                "how-to-title": "How to use it",
                "how-to-1": "1. Find your water consumption bill",
                "how-to-2": "2. Enter your total water consumption in cubic meters (m³) as shown on the bill",
                "how-to-3": "3. Select the correct billing period",
                "how-to-4": "4. Enter the number of people who have this household as their regular residence",
                "how-to-5": '5. Click "Calculate" to see the results',
                "tips-title": "Water Saving Tips",
                "tip-1": "• Take shorter showers with lower pressure. Aim for 5 minutes of continuous flow, which corresponds to 45-50 liters of water. Each minute in the shower requires about 9-10 liters of water, and on average a shower lasts 9-10 minutes, accounting for 60% of total water consumption. Collect any cold water in a bucket while waiting for hot water.",
                "tip-2": "• Locate and repair any leaks. Check your meter consumption during hours when you're away from home. Regularly check solar water heaters and tanks for leaks.",
                "tip-3": "• Use full loads in washing machines and dishwashers",
                "tip-4": "• Choose drought-resistant plants for your garden (drought-resistant species) and limit lawn areas",
                "tip-5": "• Turn off the tap while brushing teeth or shaving. Remember that each minute the tap runs corresponds to 15 liters, or 10% of daily consumption per person",
                "tip-6": "• Water early in the morning or late in the afternoon to reduce evaporation. Avoid using a hose, as it corresponds to 15 liters per minute (10% of daily water consumption per person in Cyprus)",
                "tip-7": "• Use a bucket and sponge instead of a hose when washing your car",
                "result-title": "Average consumption per person/day",
                "result-diff": "Difference from average (140 liters)",
                "result-below": "below average",
                "result-above": "above average",
                "result-excellent": "Excellent! You consume less than 20% of the average consumption.",
                "result-excellent-desc": "If all citizens had this consumption, we would save about 10 million m³ of water annually, which would be enough to supply 200,000 people for a year (equivalent to the population of Larnaca and Famagusta Districts)! <br><br> Keep it up and help establish water consciousness in Cyprus!",
                "result-good": "Very good! You consume 10% less water than the average.",
                "result-good-desc": "If all citizens had this consumption, we would save about 5 million m³ of water annually, which would be enough to supply 100,000 people for a year (equivalent to the population of Paphos District)! <br><br> Keep it up, and with some small changes, such as reducing shower time by 1-2 minutes, avoiding hose use for watering, and using full loads in washing machines, you'll get even closer to being among the top consumers!",
                "result-average": "Well done! You're slightly below average.",
                "result-average-desc": "If everyone had this consumption, we would save almost 2.5 million m³ annually, which would be enough to supply 50,000 people for a year (equivalent to the population of Famagusta District)! <br><br> Keep it up, and with some targeted changes, such as reducing shower time by 2-3 minutes, avoiding hose use for watering, and using full loads in washing machines, you'll get even closer to the goal of reducing total consumption by 10% (125 liters/person)!",
                "result-slightly-high": "Watch out! You're slightly above average.",
                "result-slightly-high-desc": "You exceed the average water consumption in Cyprus, which corresponds to 140 liters per person per day. By reducing your shower time by just 2 minutes (20 liters), you can easily reach the average! <br><br> With some targeted changes, such as avoiding hose use for watering, and using full loads in washing machines, you'll get even closer to the goal of reducing total consumption by 10% (125 liters/person)!",
                "result-high": "Attention! You consume more than 10% above the average consumption.",
                "result-high-desc": "You exceed the average water consumption in Cyprus, which corresponds to 140 liters per person per day. By reducing your shower time by just 2-3 minutes (20-30 liters), you can easily reach the average! <br><br> With some targeted changes, such as avoiding hose use for watering, and using full loads in washing machines, you'll get even closer to the goal of reducing total consumption by 10% (125 liters/person)!",
                "result-very-high": "Attention! You consume more than 20% above the average consumption.",
                "result-very-high-desc": "The average consumer in Cyprus uses 140 liters/day. Start immediately with small changes to reach the average by reducing your daily shower by 2-3 minutes (20-30 liters). <br><br> With some targeted changes, such as avoiding hose use for watering, checking for leaks (by monitoring your meter during hours when you're away from home), and using full loads in washing machines, you'll get even closer to the goal of reducing total consumption by 10% (125 liters/person)!",
                "share-title": "Share your result:",
                "copy-success": "Copied!",
                "email-subject": "Water Consumption",
                "fill-fields": "Please fill in all fields correctly.",
                "negative-consumption": "Water consumption cannot be zero or negative.",
                "negative-people": "Number of people cannot be zero or negative.",
                "total-placeholder": "e.g., 30",
                "people-placeholder": "e.g., 4",
                "copy-summary": "Copy summary",
                "version-title": "Version",
                "version-number": "0.99",
                "contact-info": "For improvements and suggestions, please contact us at kios-dwic@ucy.onmicrosoft.com",
                "contact-info-prefix": "For improvements and suggestions, please contact us at ",
                "example-link": "[example]",
                "email-copied": "Email copied!",
                "scarcity-msg": "Cyprus faces chronic water stress, which threatens our quality of life. We can all help manage this serious crisis, and to reduce the risk of water cuts.",
                "action-msg": "Each of us can help manage this serious crisis, and to reduce the risk of water cuts, by making small changes to our daily habits: reducing water consumption by 1 liter per person per day, we can ensure 70,000 people have water for a year!",
                "reminder-title": "Reminder in 1 month",
                "progress-reminder-msg": "Set a reminder to repeat the calculation in 30 days to track your progress!",
                "stress-info-title": "What is chronic water stress?",
                "stress-info-1": "Chronic water stress is a situation where water demand exceeds availability for a long period of time. In Cyprus, this means we consume more water than what can be naturally replenished by rainfall.",
                "stress-info-2": "According to the European Commission, Cyprus faces high water stress (>40%), placing it among the most water-stressed regions of Europe. In 2022, the water consumption in Cyprus was 140 liters per person per day.",
                "stress-info-3": "The main causes include: population growth, tourism development, agricultural activities, and climate change that reduces rainfall by 15-20% over the last 30 years.",
                "stress-info-4": "The consequences include: water cuts, increased costs, decreased water quality, and threat to biodiversity. In 2021, Cyprus faced a severe drought that led to restrictions.",
                "stress-info-5": "The solution lies in conserving water. Every liter we save helps us maintain our groundwater resources and reduce our dependency on desalination, which is energy-efficient and environmentally friendly.",
                "action-info-title": "What small changes make a big difference?",
                "action-info-1": "Saving 1 liter of water per person per day might seem small, but multiplied by the population of Cyprus (1.2 million) it creates a significant impact.",
                "action-info-2": "Calculation: 1 minute × 9 liters/minute × 1.2 million people × 365 days = 3.9 million m³ of water annually.",
                "action-info-3": "This amount of water can supply 70,000 people for a year, or cover the needs of a small city like Paphos for 6 months.",
                "action-info-4": "In addition, water conservation reduces desalination costs (€0.8/m³), saves energy, and reduces CO2 emissions by 2.5 kg per m³ of water.",
                "action-info-5": "Small changes include: turning off the tap during brushing teeth or shaving (-15L), shorter showers (-20L), and avoiding using a hose when washing your car (-15L/minute)."
            }
        };

        let currentLang = "el";

        // Function to update text content
        function updateLanguage(lang) {
            const elements = document.querySelectorAll("[data-el]");
            elements.forEach((element) => {
                const key = element.getAttribute("data-el");
                if (translations[lang][key]) {
                    if (element.tagName === "INPUT" || element.tagName === "SELECT") {
                        element.placeholder = translations[lang][key];
                    } else if (key === "intro" || key === "intro-question") {
                        element.innerHTML = translations[lang][key];
                    } else {
                        element.textContent = translations[lang][key];
                        // Update title attribute for elements that have it
                        if (element.hasAttribute("title")) {
                            element.title = translations[lang][key];
                        }
                    }
                }
            });
            document.getElementById("langToggle").textContent =
                lang === "el" ? "English" : "Ελληνικά";
            document.getElementById("langToggle").title =
                lang === "el" ? "English" : "Ελληνικά";
            currentLang = lang;

            // Update existing results if they are displayed
            const result = document.getElementById("result");
            if (result.style.display !== "none") {
                const totalM3 = parseFloat(document.getElementById("total").value);
                const months = parseInt(document.getElementById("period").value);
                const people = parseInt(document.getElementById("people").value);
                const avg = 140;

                const totalLitres = totalM3 * 1000;
                const days = months * 30.4;
                const perDay = totalLitres / days / people;
                const diffPct = ((perDay - avg) / avg) * 100;

                let msg = `
            <div class="result-box">
              <p class="result-value">${perDay.toFixed(1)} ${translations[currentLang]["liters"]}</p>
              <p class="result-label">${translations[currentLang]["result-title"]}</p>
              <div class="gauge-track"><div class="gauge-fill" id="gaugeBar"></div></div>
            </div>
            <div class="result-box">
              <p class="result-diff">${
                perDay < avg
                  ? `${Math.abs(diffPct).toFixed(1)}% ${translations[currentLang]["result-below"]}`
                  : `${diffPct.toFixed(1)}% ${translations[currentLang]["result-above"]}`
              }</p>
              <p class="result-diff-label">${translations[currentLang]["result-diff"]}</p>
            </div>
            <br/>`;

          if (diffPct < -20) {
            msg += `${translations[currentLang]["result-excellent"]}<br/><br/>${translations[currentLang]["result-excellent-desc"]}`;
          } else if (diffPct >= -20 && diffPct < -10) {
            msg += `${translations[currentLang]["result-good"]}<br/><br/>${translations[currentLang]["result-good-desc"]}`;
          } else if (diffPct >= -10 && diffPct < 0) {
            msg += `${translations[currentLang]["result-average"]}<br/><br/>${translations[currentLang]["result-average-desc"]}`;
          } else if (diffPct >= 0 && diffPct < 10) {
            msg += `${translations[currentLang]["result-slightly-high"]}<br/><br/>${translations[currentLang]["result-slightly-high-desc"]}`;
          } else if (diffPct >= 10 && diffPct < 20) {
            msg += `${translations[currentLang]["result-high"]}<br/><br/>${translations[currentLang]["result-high-desc"]}`;
          } else {
            msg += `${translations[currentLang]["result-very-high"]}<br/><br/>${translations[currentLang]["result-very-high-desc"]}`;
          }

          result.innerHTML = msg;

          const bar = document.getElementById("gaugeBar");
          const percentage = Math.min(100, Math.max(0, ((perDay - 70) / (210 - 70)) * 100));
          bar.style.width = percentage + "%";
          
          // Set color based on percentage like a thermometer
          if (percentage <= 50) {
              // 0-50%: Green to Orange (70-140 liters)
              const greenToOrange = percentage / 50; // 0 to 1
              const red = Math.round(76 + (greenToOrange * 127)); // 76 to 203
              const green = Math.round(175 - (greenToOrange * 87)); // 175 to 88
              const blue = Math.round(80 - (greenToOrange * 80)); // 80 to 0
              bar.style.background = `rgb(${red}, ${green}, ${blue})`;
          } else {
              // 50-100%: Orange to Red (140-210 liters)
              const orangeToRed = (percentage - 50) / 50; // 0 to 1
              const red = Math.round(203 + (orangeToRed * 52)); // 203 to 255
              const green = Math.round(88 - (orangeToRed * 88)); // 88 to 0
              const blue = Math.round(0); // Always 0
              bar.style.background = `rgb(${red}, ${green}, ${blue})`;
          }

          // Update share section if it's visible
          const shareSection = document.getElementById("shareSection");
          if (shareSection.style.display !== "none") {
            //const base = `${location.origin}${location.pathname}`;
            const base = `https://stagona.cy`;
            const url = base;

            let summary =
              lang === "el"
                ? `Μόλις υπολόγισα την κατανάλωσή νερού μου: ${perDay.toFixed(
                    1
                  )} λίτρα/ημέρα ` +
                  (perDay < avg
                    ? `(${Math.abs(diffPct).toFixed(1)}% ${translations[currentLang]["result-below"]} των 140 λίτρων/ημέρα)`
                    : `(${diffPct.toFixed(1)}% ${translations[currentLang]["result-above"]} των 140 λίτρων/ημέρα)`) +
                  `. Δοκίμασέ το και εσύ: ${url}`
                : `I just calculated my water consumption: ${perDay.toFixed(
                    1
                  )} liters/day ` +
                  (perDay < avg
                    ? `(${Math.abs(diffPct).toFixed(1)}% ${translations[currentLang]["result-below"]} of 140 liters/day)`
                    : `(${diffPct.toFixed(1)}% ${translations[currentLang]["result-above"]} of 140 liters/day)`) +
                  `. Try it yourself: ${url}`;

            const enc = encodeURIComponent(summary);

            document.getElementById("shareTwitter").onclick = () =>
              window.open(
                `https://twitter.com/intent/tweet?text=${enc}`,
                "_blank"
              );
            document.getElementById("shareFacebook").onclick = () =>
              window.open(
                `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(
                  url
                )}&quote=${enc}`,
                "_blank"
              );
            document.getElementById("shareWhatsApp").onclick = () =>
              window.open(`https://wa.me/?text=${enc}`, "_blank");
            document.getElementById("shareViber").onclick = () =>
              window.open(`viber://forward?text=${enc}`, "_blank");
            document.getElementById("shareEmail").onclick = () => {
              try {
                const subject = currentLang === "el" ? "Κατανάλωση νερού" : "Water Consumption";
                const mailtoLink = `mailto:?subject=${encodeURIComponent(subject)}&body=${enc}`;
                window.open(mailtoLink, "_blank");
              } catch (err) {
                console.error('Failed to open email client:', err);
                showNotice(currentLang === "el" ? "Αποτυχία ανοίγματος email" : "Failed to open email client");
              }
            };
            document.getElementById("copySummary").onclick = () =>
              navigator.clipboard
                .writeText(summary)
                .then(() => showNotice(translations[lang]["copy-success"]));
          }
        }
      }

      // Language toggle button click handler
      document.getElementById("langToggle").addEventListener("click", () => {
        const newLang = currentLang === "el" ? "en" : "el";
        updateLanguage(newLang);
      });

      document.getElementById("calc").addEventListener("click", () => {
        const totalM3 = parseFloat(document.getElementById("total").value);
        const months = parseInt(document.getElementById("period").value);
        const people = parseInt(document.getElementById("people").value);
        const avg = 140;



        if (totalM3 <= 0) {
          showNotice(translations[currentLang]["negative-consumption"]);
          return;
        }

        if (people <= 0) {
          showNotice(translations[currentLang]["negative-people"]);
          return;
        }
        
        if (!totalM3){document.getElementById("total").focus();return;}
        if (!months){document.getElementById("period").focus();return;}
        if (!people){document.getElementById("people").focus();return;}
        const totalLitres = totalM3 * 1000;
        const days = months * 30.4;
        const perDay = totalLitres / days / people;
        const diffPct = ((perDay - avg) / avg) * 100;

        let msg = `
          <div class="result-box">
            <p class="result-value">${perDay.toFixed(1)} λίτρα</p>
            <p class="result-label">${translations[currentLang]["result-title"]}</p>
            <div class="gauge-track"><div class="gauge-fill" id="gaugeBar"></div></div>
          </div>
          <div class="result-box">
            <p class="result-diff">${
              perDay < avg
                ? `${Math.abs(diffPct).toFixed(1)}% ${translations[currentLang]["result-below"]}`
                : `${diffPct.toFixed(1)}% ${translations[currentLang]["result-above"]}`
            }</p>
            <p class="result-diff-label">${translations[currentLang]["result-diff"]}</p>
          </div>
          <br/>`;

        if (diffPct < -20) {
          msg += `${translations[currentLang]["result-excellent"]}<br/><br/>${translations[currentLang]["result-excellent-desc"]}`;
        } else if (diffPct >= -20 && diffPct < -10) {
          msg += `${translations[currentLang]["result-good"]}<br/><br/>${translations[currentLang]["result-good-desc"]}`;
        } else if (diffPct >= -10 && diffPct < 0) {
          msg += `${translations[currentLang]["result-average"]}<br/><br/>${translations[currentLang]["result-average-desc"]}`;
        } else if (diffPct >= 0 && diffPct < 10) {
          msg += `${translations[currentLang]["result-slightly-high"]}<br/><br/>${translations[currentLang]["result-slightly-high-desc"]}`;
        } else if (diffPct >= 10 && diffPct < 20) {
          msg += `${translations[currentLang]["result-high"]}<br/><br/>${translations[currentLang]["result-high-desc"]}`;
        } else {
          msg += `${translations[currentLang]["result-very-high"]}<br/><br/>${translations[currentLang]["result-very-high-desc"]}`;
        }

        const result = document.getElementById("result");
        result.innerHTML = msg;
        result.style.display = "block";

        const bar = document.getElementById("gaugeBar");
        const percentage = Math.min(100, Math.max(0, ((perDay - 70) / (210 - 70)) * 100));
        bar.style.width = percentage + "%";
        
        // Set color based on percentage like a thermometer
        if (percentage <= 50) {
            // 0-50%: Green to Orange (70-140 liters)
            const greenToOrange = percentage / 50; // 0 to 1
            const red = Math.round(76 + (greenToOrange * 127)); // 76 to 203
            const green = Math.round(175 - (greenToOrange * 87)); // 175 to 88
            const blue = Math.round(80 - (greenToOrange * 80)); // 80 to 0
            bar.style.background = `rgb(${red}, ${green}, ${blue})`;
        } else {
            // 50-100%: Orange to Red (140-210 liters)
            const orangeToRed = (percentage - 50) / 50; // 0 to 1
            const red = Math.round(203 + (orangeToRed * 52)); // 203 to 255
            const green = Math.round(88 - (orangeToRed * 88)); // 88 to 0
            const blue = Math.round(0); // Always 0
            bar.style.background = `rgb(${red}, ${green}, ${blue})`;
        }

        //const base = `${location.origin}${location.pathname}`;
        const base = `https://stagona.cy`;
        const params = `?total=${totalM3}&period=${months}&people=${people}`;
        const url = base;
        document.getElementById("shareSection").style.display = "block";

        let summary =
          currentLang === "el"
            ? `Μόλις υπολόγισα την κατανάλωσή νερού μου: ${perDay.toFixed(
                1
              )} λίτρα/ημέρα ` +
              (perDay < avg
                ? `(${Math.abs(diffPct).toFixed(1)}% ${translations[currentLang]["result-below"]} των 140 λίτρων/ημέρα)`
                : `(${diffPct.toFixed(1)}% ${translations[currentLang]["result-above"]} των 140 λίτρων/ημέρα)`) +
              `. Δοκίμασέ το και εσύ: ${url}`
            : `I just calculated my water consumption: ${perDay.toFixed(
                1
              )} liters/day ` +
              (perDay < avg
                ? `(${Math.abs(diffPct).toFixed(1)}% ${translations[currentLang]["result-below"]} of 140 liters/day)`
                : `(${diffPct.toFixed(1)}% ${translations[currentLang]["result-above"]} of 140 liters/day)`) +
              `. Try it yourself: ${url}`;

        const enc = encodeURIComponent(summary);

        document.getElementById("shareTwitter").onclick = () =>
          window.open(`https://twitter.com/intent/tweet?text=${enc}`, "_blank");
        document.getElementById("shareFacebook").onclick = () =>
          window.open(
            `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(
              url
            )}&quote=${enc}`,
            "_blank"
          );
        document.getElementById("shareWhatsApp").onclick = () =>
          window.open(`https://wa.me/?text=${enc}`, "_blank");
        document.getElementById("shareViber").onclick = () =>
          window.open(`viber://forward?text=${enc}`, "_blank");
        document.getElementById("shareEmail").onclick = () => {
          try {
            const subject = currentLang === "el" ? "Κατανάλωση νερού" : "Water Consumption";
            const mailtoLink = `mailto:?subject=${encodeURIComponent(subject)}&body=${enc}`;
            window.open(mailtoLink, "_blank");
          } catch (err) {
            console.error('Failed to open email client:', err);
            showNotice(currentLang === "el" ? "Αποτυχία ανοίγματος email" : "Failed to open email client");
          }
        };
        document.getElementById("copySummary").onclick = () =>
          navigator.clipboard
            .writeText(summary)
            .then(() => showNotice(translations[currentLang]["copy-success"]));
      });

      // Modal functionality
      const modal = document.getElementById("aboutModal");
      const infoButton = document.getElementById("infoButton");
      const modalClose = document.getElementById("modalClose");

      infoButton.onclick = () => {
        modal.style.display = "flex";
      };

      modalClose.onclick = () => {
        modal.style.display = "none";
      };

      window.onclick = (event) => {
        if (event.target === modal) {
          modal.style.display = "none";
        }
      };

      // Notice Modal functionality
      const noticeModal = document.getElementById("noticeModal");
      const noticeModalClose = document.getElementById("noticeModalClose");
      const noticeModalButton = document.getElementById("noticeModalButton");
      const noticeModalMessage = document.getElementById("noticeModalMessage");

      function showNotice(message) {
        noticeModalMessage.textContent = message;
        noticeModal.style.display = "flex";
      }

      function hideNotice() {
        noticeModal.style.display = "none";
      }

      noticeModalClose.onclick = hideNotice;
      noticeModalButton.onclick = hideNotice;
      noticeModal.onclick = (event) => {
        if (event.target === noticeModal) {
          hideNotice();
        }
      };

      // Add translations for the email copied message
      translations.el["email-copied"] = "Το email αντιγράφηκε!";
      translations.en["email-copied"] = "Email copied!";

      // Add email copy functionality with error handling
      document.getElementById('contactEmail').addEventListener('click', function(e) {
        e.preventDefault();
        const email = this.textContent;
        navigator.clipboard.writeText(email)
          .then(() => {
            showNotice(translations[currentLang]["email-copied"]);
          })
          .catch(err => {
            console.error('Failed to copy email:', err);
            showNotice(currentLang === "el" ? "Αποτυχία αντιγραφής email" : "Failed to copy email");
          });
      });

      // Add event listener for about links
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('about-link')) {
          e.preventDefault();
          document.getElementById('aboutModal').style.display = 'flex';
        }
      });

      // Example modal functionality
      const exampleModal = document.getElementById('exampleModal');
      const exampleModalClose = document.getElementById('exampleModalClose');

      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('example-link')) {
          e.preventDefault();
          exampleModal.style.display = 'flex';
        }
      });

      exampleModalClose.onclick = () => {
        exampleModal.style.display = 'none';
      };

      exampleModal.onclick = (event) => {
        if (event.target === exampleModal) {
          exampleModal.style.display = 'none';
        }
      };

      // Initialize the page in Greek
      updateLanguage("el");

      // Tips Modal functionality
      const tipsModal = document.getElementById('tipsModal');
      const tipsModalClose = document.getElementById('tipsModalClose');
      const tipsButton = document.getElementById('tipsButton');
      if (tipsButton) {
        tipsButton.onclick = () => {
          tipsModal.style.display = 'flex';
        };
      }
      tipsModalClose.onclick = () => {
        tipsModal.style.display = 'none';
      };
      tipsModal.onclick = (event) => {
        if (event.target === tipsModal) {
          tipsModal.style.display = 'none';
        }
      };

      // Reminder Button functionality
      const reminderButton = document.getElementById('reminderButton');
      if (reminderButton) {
        reminderButton.onclick = () => {
          // Calculate date in one month
          const oneMonthFromNow = new Date();
          oneMonthFromNow.setMonth(oneMonthFromNow.getMonth() + 1);
          
          // Format date for calendar
          const year = oneMonthFromNow.getFullYear();
          const month = String(oneMonthFromNow.getMonth() + 1).padStart(2, '0');
          const day = String(oneMonthFromNow.getDate()).padStart(2, '0');
          const hours = String(oneMonthFromNow.getHours()).padStart(2, '0');
          const minutes = String(oneMonthFromNow.getMinutes()).padStart(2, '0');
          
          const startDate = `${year}${month}${day}T${hours}${minutes}00`;
          const endDate = `${year}${month}${day}T${hours}${minutes}00`;
          
          // Create event details
          const eventTitle = currentLang === 'el' ? 'Έλεγχος κατανάλωσης νερού' : 'Water consumption check';
          const eventDescription = currentLang === 'el' 
            ? 'Έλεγξε ξανά την κατανάλωση νερού σου στο Stagona App: https://stagona.cy'
            : 'Check your water consumption again on Stagona App: https://stagona.cy';
          
          // Create calendar URL
          const calendarUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(eventTitle)}&details=${encodeURIComponent(eventDescription)}&dates=${startDate}/${endDate}`;
          
          // Open calendar in new tab
          window.open(calendarUrl, '_blank');
          
          // Show success message
          const successMsg = currentLang === 'el' 
            ? 'Η υπενθύμιση προστέθηκε στον ημερολόγιο σας!' 
            : 'Reminder added to your calendar!';
          showNotice(successMsg);
        };
      }

      // Water Stress Info Modal functionality
      const stressInfoModal = document.getElementById('stressInfoModal');
      const stressInfoModalClose = document.getElementById('stressInfoModalClose');
      const stressInfoButton = document.getElementById('stressInfo');

      if (stressInfoButton) {
        stressInfoButton.onclick = () => {
          stressInfoModal.style.display = 'flex';
        };
      }

      stressInfoModalClose.onclick = () => {
        stressInfoModal.style.display = 'none';
      };

      stressInfoModal.onclick = (event) => {
        if (event.target === stressInfoModal) {
          stressInfoModal.style.display = 'none';
        }
      };

      // Action Info Modal functionality
      const actionInfoModal = document.getElementById('actionInfoModal');
      const actionInfoModalClose = document.getElementById('actionInfoModalClose');
      const actionInfoButton = document.getElementById('actionInfo');

      if (actionInfoButton) {
        actionInfoButton.onclick = () => {
          actionInfoModal.style.display = 'flex';
        };
      }

      actionInfoModalClose.onclick = () => {
        actionInfoModal.style.display = 'none';
      };

      actionInfoModal.onclick = (event) => {
        if (event.target === actionInfoModal) {
          actionInfoModal.style.display = 'none';
        }
      };
    </script>
</body>

</html>